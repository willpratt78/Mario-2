<h1>Products</h1>

<% if @products.any? %>
  <ul>
    <% @products.each do |product|%>
      <li><%= link_to product.name, product_path(product) %></li>
    <% end %>
  </ul>
<% else %>
  <p>There are no products yet.</p>
<% end %>

<% if Product.most_reviews[0] %>
  <p><%= link_to "#{Product.most_reviews[0].name} currently has the most reviews", product_path(Product.most_reviews[0]) %></p>
<% else %>
<% end %>

<% if Product.three_most_recent[0] && Product.three_most_recent[1] && Product.three_most_recent[2]%>
  <p>The 3 newest products are:</p>
<p><%= link_to "#{Product.three_most_recent[0].name}", product_path(Product.three_most_recent[0]) %></p>
<p><%= link_to "#{Product.three_most_recent[1].name}", product_path(Product.three_most_recent[1]) %></p>
<p><%= link_to "#{Product.three_most_recent[2].name}", product_path(Product.three_most_recent[2]) %></p>
<% elsif Product.three_most_recent[0] && Product.three_most_recent[1] %>
  <p>The 2 newest products are:</p>
  <p><%= link_to "#{Product.three_most_recent[0].name}", product_path(Product.three_most_recent[0]) %></p>
  <p><%= link_to "#{Product.three_most_recent[1].name}", product_path(Product.three_most_recent[1]) %></p>
<% elsif Product.three_most_recent[0] %>
  <p>The newest product is:</p>
  <p><%= link_to "#{Product.three_most_recent[0].name}", product_path(Product.three_most_recent[0]) %></p>
<% else %>
  <p>There are currently no Products listed</p>
<% end %>


<% if @products.usa.any? %>
  <p>These Products are made in the USA</p>
  <ul>
    <% @products.usa.each do |product|%>
      <li><%= link_to product.name, product_path(product) %></li>
    <% end %>
  </ul>
<% else %>
  <p>There are no American made products yet.</p>
<% end %>

<p><%= link_to "Create new product", new_product_path %></p>
